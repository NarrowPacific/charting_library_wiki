<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Charting Library</title>
    <meta name="description" content="TradingView 中文文档 教程">
    
    
    <link rel="preload" href="/charting_library_wiki/assets/css/0.styles.54154195.css" as="style"><link rel="preload" href="/charting_library_wiki/assets/js/app.e5b750fa.js" as="script"><link rel="preload" href="/charting_library_wiki/assets/js/87.d9b6ad2a.js" as="script"><link rel="prefetch" href="/charting_library_wiki/assets/js/45.77fdc049.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/3.9a9210e8.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/4.3025f96f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/5.2e481db8.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/6.692643df.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/7.d6c7c61a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/8.ff0f9bbb.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/9.929a30eb.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/10.b9ac493c.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/11.67531abf.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/12.95004755.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/13.5f8b090e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/14.61d2b640.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/15.7019d5c6.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/16.f84bac21.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/17.33bbeaad.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/18.faed2cc9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/19.eabedd50.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/20.ec41bf98.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/21.e3cda3cb.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/22.75f47b08.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/23.9caf12e7.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/24.9cb52b13.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/25.1ee74391.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/26.23e99a27.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/27.96114175.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/28.c39e9894.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/29.e65ce808.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/30.26d6e58a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/31.1309fa0e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/32.f140b54d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/33.ab7de8c2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/34.497847f4.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/35.ff0d5d4e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/36.510643a4.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/37.ea794330.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/38.c805a15f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/39.dcd0c595.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/40.048441b9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/41.e8f5ac87.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/42.80345ee9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/43.810157de.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/44.ee1eb15d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/46.f3975c58.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/47.e2ed9389.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/48.aa18db6f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/49.6517b828.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/50.aa45c418.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/51.34038e3a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/52.d1e1248d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/53.15f51e33.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/54.b3f35d36.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/55.b3a53b32.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/56.18e47f02.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/57.7107fce6.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/58.fde0151b.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/59.d1cf9754.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/60.79173131.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/61.5e3a4ac2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/62.e4e6e728.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/63.ff9aea40.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/64.4f66dc8f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/65.3b5a4286.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/66.a6f5bbdf.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/67.aff444b7.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/68.c79aa96f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/69.2f04baac.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/70.b0d52396.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/71.148f19aa.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/72.b9e446e2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/73.ef903171.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/74.d343d04d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/75.19ae215d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/76.51b0e0e4.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/77.6279f2f3.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/78.b96dc129.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/79.039f3470.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/80.f6138705.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/81.cce9bb97.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/82.f6415b45.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/83.d375e2c5.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/84.a50f5549.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/85.de85aa80.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/86.9f650c9e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/88.a371aca2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/89.072874a9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/90.fababa10.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/91.cd19e4f3.js">
    <link rel="stylesheet" href="/charting_library_wiki/assets/css/0.styles.54154195.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/charting_library_wiki/zh/" class="home-link router-link-active"><!----> <span class="site-name">Charting Library</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/charting_library_wiki/wiki/UDF.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/charting_library_wiki/zh/wiki/UDF.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/charting_library_wiki/wiki/UDF.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/charting_library_wiki/zh/wiki/UDF.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/charting_library_wiki/zh/wiki/Home.html" class="sidebar-link">Charting Library 是什么</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>现在开始</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/zh/wiki/Package-Content.html" class="sidebar-link">文件包内容</a></li><li><a href="/charting_library_wiki/zh/wiki/Running-Your-Charting-Library.html" class="sidebar-link">运行图表库</a></li><li><a href="/charting_library_wiki/zh/wiki/Best-Practices.html" class="sidebar-link">最佳实践</a></li><li><a href="/charting_library_wiki/zh/wiki/Frequently-Asked-Questions.html" class="sidebar-link">常见问题</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>绑定数据</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/zh/wiki/How-To-Connect-My-Data.html" class="sidebar-link">如何连接我的数据</a></li><li><a href="/charting_library_wiki/zh/wiki/JS-Api.html" class="sidebar-link">JS Api</a></li><li><a href="/charting_library_wiki/zh/wiki/UDF.html" class="active sidebar-link">UDF</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/UDF.html#response-as-a-table-concept" class="sidebar-link">Response-as-a-table concept</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/UDF.html#api-calls" class="sidebar-link">API Calls</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/UDF.html#constructor" class="sidebar-link">Constructor</a></li></ul></li><li><a href="/charting_library_wiki/zh/wiki/Symbology.html" class="sidebar-link">Symbology</a></li><li><a href="/charting_library_wiki/zh/wiki/Trading-Sessions.html" class="sidebar-link">Trading Sessions</a></li><li><a href="/charting_library_wiki/zh/wiki/Quotes.html" class="sidebar-link">Quotes</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>图表定制</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/zh/wiki/Customization-Overview.html" class="sidebar-link">Customization Overview</a></li><li><a href="/charting_library_wiki/zh/wiki/Widget-Constructor.html" class="sidebar-link">a. Widget Constructor</a></li><li><a href="/charting_library_wiki/zh/wiki/Widget-Methods.html" class="sidebar-link">b. Widget Methods</a></li><li><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html" class="sidebar-link">c. Chart Methods</a></li><li><a href="/charting_library_wiki/zh/wiki/Featuresets.html" class="sidebar-link">d. Featuresets</a></li><li><a href="/charting_library_wiki/zh/wiki/Customization-Overview.html#customization-done-through-data-stream" class="sidebar-link">服务器端定制</a></li><li><a href="/charting_library_wiki/zh/wiki/Customization-Use-Cases.html" class="sidebar-link">定制用例</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Trading Terminal</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/wiki/Trading-Terminal.html" class="sidebar-link">1. Brief Intro</a></li><li><a href="/charting_library_wiki/wiki/Broker-API.html" class="sidebar-link">2. Broker API</a></li><li><a href="/charting_library_wiki/wiki/Trading-Host.html" class="sidebar-link">3. Trading Host</a></li><li><a href="/charting_library_wiki/wiki/Account-Manager.html" class="sidebar-link">4. Account Manager</a></li><li><a href="/charting_library_wiki/wiki/Trading-Objects-and-Constants.html" class="sidebar-link"> 5.Trading Objects and Constants</a></li><li><a href="/charting_library_wiki/wiki/Saving-and-Loading-Charts.html" class="sidebar-link">Saving/Loading Charts</a></li><li><a href="/charting_library_wiki/wiki/Creating-Custom-Studies.html" class="sidebar-link">Creating Custom Studies</a></li><li><a href="/charting_library_wiki/wiki/Breaking-Changes.html" class="sidebar-link">Breaking Changes In Version</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p><strong>What is UDF?</strong> It's an HTTP-based protocol that is designed to deliver data to the Charting Library in a simple and efficient way.</p> <p><strong>How can I start using it?</strong> You should create a tiny server-side HTTP service that will get the data from your storage and respond to Charting Library requests.</p> <h2 id="response-as-a-table-concept"><a href="#response-as-a-table-concept" aria-hidden="true" class="header-anchor">#</a> Response-as-a-table concept</h2> <p>Think of data feed responses as tables. For example, a data feed response that includes a symbol list from the exchange may be treated as a table where each symbol represents a row, along with some columns (minimal_price_movement, description, has_intraday e.t.c.).
Each column may be an array (it will provide a separate value for each row in a table).
Note that there might be a situation when all rows have the same value in the same column.
In this case, the column value can be defined as a single value in JSON response.</p> <p>Example:</p> <p>Let's assume that we requested a symbol list from the New York Stock Exchange. The response (in pseudo-format) might look like</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
   symbols<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;MSFT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;AAPL&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GOOG&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   min_price_move<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
   description<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Microsoft corp.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Apple Inc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Facebook&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Google&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here is how this response will look like in a table format.</p> <table><thead><tr><th>Symbol</th> <th>min_price_move</th> <th>Description</th></tr></thead> <tbody><tr><td>MSFT</td> <td>0.1</td> <td>Microsoft corp.</td></tr> <tr><td>AAPL</td> <td>0.1</td> <td>Apple Inc</td></tr> <tr><td>FB</td> <td>0.1</td> <td>Facebook</td></tr> <tr><td>GOOG</td> <td>0.1</td> <td>Google</td></tr></tbody></table> <h2 id="api-calls"><a href="#api-calls" aria-hidden="true" class="header-anchor">#</a> API Calls</h2> <h3 id="data-feed-configuration-data"><a href="#data-feed-configuration-data" aria-hidden="true" class="header-anchor">#</a> Data feed configuration data</h3> <p>Request: <code>GET /config</code></p> <p>Response: Library expects to receive a JSON response of the same structure as a result of JS API <a href="JS-Api#onreadycallback">setup() call</a>.</p> <p>Also there should be 2 additional properties:</p> <ul><li><code>supports_search</code>: Set it to <code>true</code> if your data feed supports symbol search and individual symbol resolve logic.</li> <li><code>supports_group_request</code>: Set it to <code>true</code>  if your data feed provides full information on symbol group only and is not able to perform symbol search or individual symbol resolve.</li></ul> <p>Either <code>supports_search</code> or <code>supports_group_request</code> should be set to <code>true</code>.</p> <p><strong>Remark</strong>: If your data feed doesn't implement this call (doesn't respond or sends 404 error) then the default configuration is being used. Here is the default configuration:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    supported_resolutions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'15'</span><span class="token punctuation">,</span> <span class="token string">'30'</span><span class="token punctuation">,</span> <span class="token string">'60'</span><span class="token punctuation">,</span> <span class="token string">'1D'</span><span class="token punctuation">,</span> <span class="token string">'1W'</span><span class="token punctuation">,</span> <span class="token string">'1M'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    supports_group_request<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    supports_marks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    supports_search<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    supports_timescale_marks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="symbol-group-request"><a href="#symbol-group-request" aria-hidden="true" class="header-anchor">#</a> Symbol group request</h3> <p>Request: <code>GET /symbol_info?group=&lt;group_name&gt;</code></p> <ol><li><code>group_name</code>: string</li></ol> <p>Example: <code>GET /symbol_info?group=NYSE</code></p> <p>Response: Response is expected to be an object with properties listed below.
Each property is treated as table column, as described above (see <a href="UDF#response-as-a-table-concept">response-as-a-table</a>).
The response structure is similar (but <strong>not equal</strong>) to <a href="Symbology#symbolinfo-structure">SymbolInfo</a> so please read the description to learn about the details of each field.</p> <ul><li><code>symbol</code></li> <li><code>description</code></li> <li><code>exchange-listed</code> / <code>exchange-traded</code></li> <li><code>minmovement</code> / <code>minmov</code> (NOTE: <code>minmov</code> is deprecated and will be removed in future releases)</li> <li><code>minmovement2</code> / <code>minmov2</code> (NOTE: <code>minmov2</code> is deprecated and will be removed in future releases)</li> <li><code>fractional</code></li> <li><code>pricescale</code></li> <li><code>has-intraday</code></li> <li><code>has-no-volume</code></li> <li><code>type</code></li> <li><code>ticker</code></li> <li><code>timezone</code></li> <li><code>session-regular</code> (mapped to <code>SymbolInfo.session</code>)</li> <li><code>supported-resolutions</code></li> <li><code>force-session-rebuild</code></li> <li><code>has-daily</code></li> <li><code>intraday-multipliers</code></li> <li><code>volume_precision</code></li> <li><code>has-weekly-and-monthly</code></li> <li><code>has-empty-bars</code></li></ul> <p>Here is an example of data feed response to <code>GET /symbol_info?group=NYSE</code> request:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
   symbol<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;AAPL&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MSFT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;SPX&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   description<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Apple Inc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Microsoft corp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;S&amp;P 500 index&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   exchange<span class="token operator">-</span>listed<span class="token punctuation">:</span> <span class="token string">&quot;NYSE&quot;</span><span class="token punctuation">,</span>
   exchange<span class="token operator">-</span>traded<span class="token punctuation">:</span> <span class="token string">&quot;NYSE&quot;</span><span class="token punctuation">,</span>
   minmovement<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   minmovement2<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   pricescale<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   has<span class="token operator">-</span>dwm<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   has<span class="token operator">-</span>intraday<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   has<span class="token operator">-</span>no<span class="token operator">-</span>volume<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
   type<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;stock&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stock&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   ticker<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;AAPL~0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MSFT~0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$SPX500&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   timezone<span class="token punctuation">:</span> “America<span class="token operator">/</span>New_York”<span class="token punctuation">,</span>
   session<span class="token operator">-</span>regular<span class="token punctuation">:</span> “<span class="token number">0900</span><span class="token operator">-</span><span class="token number">1600</span>”<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Remark 1</strong>: This call will be used if your data feed sent <code>supports_group_request: true</code> in the configuration data or didn't respond to the configuration request at all.</p> <p><strong>Remark 2</strong>: In the event that your data feed does not support the requested symbol group (which should not happen if your response to request #1 (supported groups) is correct) you may expect a 404 error.</p> <p><strong>Remark 3</strong>: When using this mode of receiving data (getting large amount of symbol data) your browser will keep the data that wasn't even requested by the user.
If your symbol list has more than a few items, please consider supporting symbol search / individual symbol resolve instead.</p> <h3 id="symbol-resolve"><a href="#symbol-resolve" aria-hidden="true" class="header-anchor">#</a> Symbol resolve</h3> <p>Request: <code>GET /symbols?symbol=&lt;symbol&gt;</code></p> <ol><li><code>symbol</code>: string. Symbol name or ticker.</li></ol> <p>Example: <code>GET /symbols?symbol=AAL</code>, <code>GET /symbols?symbol=NYSE:MSFT</code></p> <p>A JSON response of the same structure as <a href="Symbology#symbolinfo-structure">SymbolInfo</a></p> <p><strong>Remark</strong>: This call will be requested if your data feed sent <code>supports_group_request: false</code> and <code>supports_search: true</code> in the configuration data.</p> <h3 id="symbol-search"><a href="#symbol-search" aria-hidden="true" class="header-anchor">#</a> Symbol search</h3> <p>Request: <code>GET /search?query=&lt;query&gt;&amp;type=&lt;type&gt;&amp;exchange=&lt;exchange&gt;&amp;limit=&lt;limit&gt;</code></p> <ul><li><code>query</code>: string. Text typed by the user in the Symbol Search edit box</li> <li><code>type</code>: string. One of the symbol types <a href="JS-Api#symbols_types">supported</a> by your back-end</li> <li><code>exchange</code>: string. One of the exchanges <a href="JS-Api#exchanges">supported</a> by your back-end</li> <li><code>limit</code>: integer. The maximum number of symbols in a response</li></ul> <p>Example: <code>GET /search?query=AA&amp;type=stock&amp;exchange=NYSE&amp;limit=15</code></p> <p>A response is expected to be an array of symbol objects as in <a href="JS-Api#searchsymbolsuserinput-exchange-symboltype-onresultreadycallback">respective JS API call</a></p> <p><strong>Remark</strong>: This call will be requested if your data feed sent <code>supports_group_request: false</code> and <code>supports_search: true</code> in the configuration data.</p> <h3 id="bars"><a href="#bars" aria-hidden="true" class="header-anchor">#</a> Bars</h3> <p>Request: <code>GET /history?symbol=&lt;ticker_name&gt;&amp;from=&lt;unix_timestamp&gt;&amp;to=&lt;unix_timestamp&gt;&amp;resolution=&lt;resolution&gt;</code></p> <ul><li><code>symbol</code>: symbol name or ticker.</li> <li><code>from</code>: unix timestamp (UTC) of leftmost required bar</li> <li><code>to</code>: unix timestamp (UTC) of rightmost required bar</li> <li><code>resolution</code>: string</li></ul> <p>Example: <code>GET /history?symbol=BEAM~0&amp;resolution=D&amp;from=1386493512&amp;to=1395133512</code></p> <p>A response is expected to be an object with some properties listed below. Each property is treated as a table column, as described above.</p> <ul><li><code>s</code>: status code. Expected values: <code>ok</code> | <code>error</code> | <code>no_data</code></li> <li><code>errmsg</code>: Error message. Should be present only when <code>s = 'error'</code></li> <li><code>t</code>: Bar time. Unix timestamp (UTC)</li> <li><code>c</code>: Closing price</li> <li><code>o</code>: Opening price (optional)</li> <li><code>h</code>: High price (optional)</li> <li><code>l</code>: Low price (optional)</li> <li><code>v</code>: Volume (optional)</li> <li><code>nextTime</code>: Time of the next bar if there is no data (status code is <code>no_data</code>) in the requested period (optional)</li></ul> <p><strong>Remark</strong>: Bar time for daily bars should be 00:00 UTC and is expected to be a trading day (not a day when the session starts).
Charting Library aligns the time according to the <a href="Symbology#session">Session</a> from SymbolInfo.</p> <p><strong>Remark</strong>: Bar time for monthly bars should be 00:00 UTC and is the first trading day of the month.</p> <p><strong>Remark</strong>: Prices should be passed as numbers and not as strings in quotation marks.</p> <p>Example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
   s<span class="token punctuation">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
   t<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1386493512</span><span class="token punctuation">,</span> <span class="token number">1386493572</span><span class="token punctuation">,</span> <span class="token number">1386493632</span><span class="token punctuation">,</span> <span class="token number">1386493692</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   c<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">42.1</span><span class="token punctuation">,</span> <span class="token number">43.4</span><span class="token punctuation">,</span> <span class="token number">44.3</span><span class="token punctuation">,</span> <span class="token number">42.8</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
   s<span class="token punctuation">:</span> <span class="token string">&quot;no_data&quot;</span><span class="token punctuation">,</span>
   nextTime<span class="token punctuation">:</span> <span class="token number">1386493512</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
   s<span class="token punctuation">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
   t<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1386493512</span><span class="token punctuation">,</span> <span class="token number">1386493572</span><span class="token punctuation">,</span> <span class="token number">1386493632</span><span class="token punctuation">,</span> <span class="token number">1386493692</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   c<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">42.1</span><span class="token punctuation">,</span> <span class="token number">43.4</span><span class="token punctuation">,</span> <span class="token number">44.3</span><span class="token punctuation">,</span> <span class="token number">42.8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   o<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">41.0</span><span class="token punctuation">,</span> <span class="token number">42.9</span><span class="token punctuation">,</span> <span class="token number">43.7</span><span class="token punctuation">,</span> <span class="token number">44.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   h<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">43.0</span><span class="token punctuation">,</span> <span class="token number">44.1</span><span class="token punctuation">,</span> <span class="token number">44.8</span><span class="token punctuation">,</span> <span class="token number">44.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   l<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">40.4</span><span class="token punctuation">,</span> <span class="token number">42.1</span><span class="token punctuation">,</span> <span class="token number">42.8</span><span class="token punctuation">,</span> <span class="token number">42.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   v<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">12000</span><span class="token punctuation">,</span> <span class="token number">18500</span><span class="token punctuation">,</span> <span class="token number">24000</span><span class="token punctuation">,</span> <span class="token number">45000</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="how-nexttime-works"><a href="#how-nexttime-works" aria-hidden="true" class="header-anchor">#</a> How <code>nextTime</code> works</h4> <p>Let's assume that a user opened the chart where <code>resolution = 1</code> and the Library requests the following range of data from the data feed <code>[3 Apr 2015 16:00 UTC+0, 3 Apr 2015 19:00 UTC+0]</code> for a stock that is traded on the NYSE.
April 3rd was Good Friday which means that the markets were closed.
Library expects the following response from the data feed.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  s<span class="token punctuation">:</span> <span class="token string">&quot;no_data&quot;</span><span class="token punctuation">,</span>
  nextTime<span class="token punctuation">:</span> <span class="token number">1428001140000</span> <span class="token comment">// 2 Apr 2015 18:59:00 GMT+0</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>nextTime</code> is the time of the closest available bar in the past.</p> <h3 id="marks"><a href="#marks" aria-hidden="true" class="header-anchor">#</a> Marks</h3> <p>Request: <code>GET /marks?symbol=&lt;ticker_name&gt;&amp;from=&lt;unix_timestamp&gt;&amp;to=&lt;unix_timestamp&gt;&amp;resolution=&lt;resolution&gt;</code></p> <ul><li><code>symbol</code>: symbol name or ticker.</li> <li><code>from</code>: unix timestamp (UTC) of leftmost visible bar</li> <li><code>to</code>: unix timestamp (UTC) of rightmost visible bar</li> <li><code>resolution</code>: string</li></ul> <p>A response is expected to be an object with some properties listed below.
This object is similar to <a href="JS-Api#getmarkssymbolinfo-from-to-ondatacallback-resolution">respective response</a> in JS API, but each property is treated as a table column, as described above.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> ids<span class="token punctuation">]</span><span class="token punctuation">,</span>
    time<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> times<span class="token punctuation">]</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> colors<span class="token punctuation">]</span><span class="token punctuation">,</span>
    text<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> texts<span class="token punctuation">]</span><span class="token punctuation">,</span>
    label<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> labels<span class="token punctuation">]</span><span class="token punctuation">,</span>
    labelFontColor<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> label font colors<span class="token punctuation">]</span><span class="token punctuation">,</span>
    minSize<span class="token punctuation">:</span> <span class="token punctuation">[</span>array <span class="token keyword">of</span> minSizes<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Remark</strong>: This call will be requested if your data feed sent <code>supports_marks: true</code> in the configuration data.</p> <h3 id="timescale-marks"><a href="#timescale-marks" aria-hidden="true" class="header-anchor">#</a> Timescale marks</h3> <p>Request: <code>GET /timescale_marks?symbol=&lt;ticker_name&gt;&amp;from=&lt;unix_timestamp&gt;&amp;to=&lt;unix_timestamp&gt;&amp;resolution=&lt;resolution&gt;</code></p> <ul><li><code>symbol</code>: symbol name or ticker.</li> <li><code>from</code>: unix timestamp (UTC) or leftmost visible bar</li> <li><code>to</code>: unix timestamp (UTC) or rightmost visible bar</li> <li><code>resolution</code>: string</li></ul> <p>A response is expected to be an array of objects with properties listed below.</p> <ul><li><code>id</code>: unique identifier of a mark</li> <li><code>color</code>: rgba color</li> <li><code>label</code>: a letter to be displayed in a circle</li> <li><code>time</code>: unix time</li> <li><code>tooltip</code>: tooltip text</li></ul> <p><strong>Remark</strong>: This call will be requested if your data feed sent <code>supports_timescale_marks: true</code> in the configuration data.</p> <h3 id="server-time"><a href="#server-time" aria-hidden="true" class="header-anchor">#</a> Server time</h3> <p>Request: <code>GET /time</code></p> <p>Response: Numeric unix time without milliseconds.</p> <p>Example: <code>1445324591</code></p> <h3 id="quotes"><a href="#quotes" aria-hidden="true" class="header-anchor">#</a> Quotes</h3> <p>Request: <code>GET /quotes?symbols=&lt;ticker_name_1&gt;,&lt;ticker_name_2&gt;,...,&lt;ticker_name_n&gt;</code></p> <p>Example: <code>GET /quotes?symbols=NYSE%3AAA%2CNYSE%3AF%2CNasdaqNM%3AAAPL</code></p> <p>A response is an object with the following keys.</p> <ul><li><code>s</code>: Status code for the request. Expected values are: <code>ok</code> or <code>error</code></li> <li><code>errmsg</code>: Error message. Should be present only when <code>s = 'error'</code></li> <li><code>d</code>: <a href="Quotes">symbols data</a> Array</li></ul> <p>Example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;s&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;d&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;s&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;n&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NYSE:AA&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;v&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;ch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;+0.16&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;chp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.98&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;short_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AA&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;exchange&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NYSE&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alcoa Inc. Common&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;lp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.57&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ask&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.58&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;bid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.57&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;open_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.25&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;high_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.60&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;low_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.25&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;prev_close_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.41&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;volume&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4029041&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;s&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;n&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NYSE:F&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;v&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;ch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;+0.15&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;chp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.89&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;short_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;F&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;exchange&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NYSE&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ford Motor Company&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;lp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17.02&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ask&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17.03&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;bid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17.02&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;open_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.74&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;high_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17.08&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;low_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.74&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;prev_close_price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.87&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;volume&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7713782&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="constructor"><a href="#constructor" aria-hidden="true" class="header-anchor">#</a> Constructor</h2> <p><code>Datafeeds.UDFCompatibleDatafeed = function(datafeedURL, updateFrequency)</code></p> <h3 id="datafeedurl"><a href="#datafeedurl" aria-hidden="true" class="header-anchor">#</a> datafeedURL</h3> <p>This is a URL of a data server that will receive requests and return data.</p> <h3 id="updatefrequency"><a href="#updatefrequency" aria-hidden="true" class="header-anchor">#</a> updateFrequency</h3> <p>This is a frequency of requests that the data feed will send to the server in milliseconds. Default is 10000 (10 sec).</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-9-6 21:23:09</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/charting_library_wiki/zh/wiki/JS-Api.html" class="prev">
          JS Api
        </a></span> <span class="next"><a href="/charting_library_wiki/zh/wiki/Symbology.html">
          Symbology
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/charting_library_wiki/assets/js/87.d9b6ad2a.js" defer></script><script src="/charting_library_wiki/assets/js/app.e5b750fa.js" defer></script>
  </body>
</html>
