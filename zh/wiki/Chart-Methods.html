<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Charting Library</title>
    <meta name="description" content="TradingView 中文文档 教程">
    
    
    <link rel="preload" href="/charting_library_wiki/assets/css/0.styles.54154195.css" as="style"><link rel="preload" href="/charting_library_wiki/assets/js/app.e5b750fa.js" as="script"><link rel="preload" href="/charting_library_wiki/assets/js/53.15f51e33.js" as="script"><link rel="prefetch" href="/charting_library_wiki/assets/js/45.77fdc049.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/3.9a9210e8.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/4.3025f96f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/5.2e481db8.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/6.692643df.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/7.d6c7c61a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/8.ff0f9bbb.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/9.929a30eb.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/10.b9ac493c.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/11.67531abf.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/12.95004755.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/13.5f8b090e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/14.61d2b640.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/15.7019d5c6.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/16.f84bac21.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/17.33bbeaad.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/18.faed2cc9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/19.eabedd50.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/20.ec41bf98.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/21.e3cda3cb.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/22.75f47b08.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/23.9caf12e7.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/24.9cb52b13.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/25.1ee74391.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/26.23e99a27.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/27.96114175.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/28.c39e9894.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/29.e65ce808.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/30.26d6e58a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/31.1309fa0e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/32.f140b54d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/33.ab7de8c2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/34.497847f4.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/35.ff0d5d4e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/36.510643a4.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/37.ea794330.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/38.c805a15f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/39.dcd0c595.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/40.048441b9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/41.e8f5ac87.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/42.80345ee9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/43.810157de.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/44.ee1eb15d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/46.f3975c58.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/47.e2ed9389.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/48.aa18db6f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/49.6517b828.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/50.aa45c418.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/51.34038e3a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/52.d1e1248d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/54.b3f35d36.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/55.b3a53b32.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/56.18e47f02.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/57.7107fce6.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/58.fde0151b.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/59.d1cf9754.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/60.79173131.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/61.5e3a4ac2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/62.e4e6e728.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/63.ff9aea40.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/64.4f66dc8f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/65.3b5a4286.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/66.a6f5bbdf.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/67.aff444b7.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/68.c79aa96f.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/69.2f04baac.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/70.b0d52396.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/71.148f19aa.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/72.b9e446e2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/73.ef903171.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/74.d343d04d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/75.19ae215d.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/76.51b0e0e4.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/77.6279f2f3.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/78.b96dc129.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/79.039f3470.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/80.f6138705.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/81.cce9bb97.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/82.f6415b45.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/83.d375e2c5.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/84.a50f5549.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/85.de85aa80.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/86.9f650c9e.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/87.d9b6ad2a.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/88.a371aca2.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/89.072874a9.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/90.fababa10.js"><link rel="prefetch" href="/charting_library_wiki/assets/js/91.cd19e4f3.js">
    <link rel="stylesheet" href="/charting_library_wiki/assets/css/0.styles.54154195.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/charting_library_wiki/zh/" class="home-link router-link-active"><!----> <span class="site-name">Charting Library</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/charting_library_wiki/wiki/Chart-Methods.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/charting_library_wiki/zh/wiki/Chart-Methods.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/charting_library_wiki/wiki/Chart-Methods.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/charting_library_wiki/zh/wiki/Chart-Methods.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/charting_library_wiki/zh/wiki/Home.html" class="sidebar-link">Charting Library 是什么</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>现在开始</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/zh/wiki/Package-Content.html" class="sidebar-link">文件包内容</a></li><li><a href="/charting_library_wiki/zh/wiki/Running-Your-Charting-Library.html" class="sidebar-link">运行图表库</a></li><li><a href="/charting_library_wiki/zh/wiki/Best-Practices.html" class="sidebar-link">最佳实践</a></li><li><a href="/charting_library_wiki/zh/wiki/Frequently-Asked-Questions.html" class="sidebar-link">常见问题</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>绑定数据</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/zh/wiki/How-To-Connect-My-Data.html" class="sidebar-link">如何连接我的数据</a></li><li><a href="/charting_library_wiki/zh/wiki/JS-Api.html" class="sidebar-link">JS Api</a></li><li><a href="/charting_library_wiki/zh/wiki/UDF.html" class="sidebar-link">UDF</a></li><li><a href="/charting_library_wiki/zh/wiki/Symbology.html" class="sidebar-link">Symbology</a></li><li><a href="/charting_library_wiki/zh/wiki/Trading-Sessions.html" class="sidebar-link">Trading Sessions</a></li><li><a href="/charting_library_wiki/zh/wiki/Quotes.html" class="sidebar-link">Quotes</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>图表定制</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/zh/wiki/Customization-Overview.html" class="sidebar-link">Customization Overview</a></li><li><a href="/charting_library_wiki/zh/wiki/Widget-Constructor.html" class="sidebar-link">a. Widget Constructor</a></li><li><a href="/charting_library_wiki/zh/wiki/Widget-Methods.html" class="sidebar-link">b. Widget Methods</a></li><li><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html" class="active sidebar-link">c. Chart Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#methods" class="sidebar-link">Methods</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#subscribing-to-chart-events" class="sidebar-link">Subscribing To Chart Events</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#chart-actions" class="sidebar-link">Chart Actions</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#studies-and-shapes" class="sidebar-link">Studies And Shapes</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#study-templates" class="sidebar-link">Study Templates</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#trading-primitives" class="sidebar-link">Trading Primitives</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#getters" class="sidebar-link">Getters</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#other" class="sidebar-link">Other</a></li><li class="sidebar-sub-header"><a href="/charting_library_wiki/zh/wiki/Chart-Methods.html#see-also" class="sidebar-link">See Also</a></li></ul></li><li><a href="/charting_library_wiki/zh/wiki/Featuresets.html" class="sidebar-link">d. Featuresets</a></li><li><a href="/charting_library_wiki/zh/wiki/Customization-Overview.html#customization-done-through-data-stream" class="sidebar-link">服务器端定制</a></li><li><a href="/charting_library_wiki/zh/wiki/Customization-Use-Cases.html" class="sidebar-link">定制用例</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Trading Terminal</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/charting_library_wiki/wiki/Trading-Terminal.html" class="sidebar-link">1. Brief Intro</a></li><li><a href="/charting_library_wiki/wiki/Broker-API.html" class="sidebar-link">2. Broker API</a></li><li><a href="/charting_library_wiki/wiki/Trading-Host.html" class="sidebar-link">3. Trading Host</a></li><li><a href="/charting_library_wiki/wiki/Account-Manager.html" class="sidebar-link">4. Account Manager</a></li><li><a href="/charting_library_wiki/wiki/Trading-Objects-and-Constants.html" class="sidebar-link"> 5.Trading Objects and Constants</a></li><li><a href="/charting_library_wiki/wiki/Saving-and-Loading-Charts.html" class="sidebar-link">Saving/Loading Charts</a></li><li><a href="/charting_library_wiki/wiki/Creating-Custom-Studies.html" class="sidebar-link">Creating Custom Studies</a></li><li><a href="/charting_library_wiki/wiki/Breaking-Changes.html" class="sidebar-link">Breaking Changes In Version</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p>Here is a list of methods supported by the chart.</p> <p><strong>Before version 1.4.</strong> You can call these methods using widget object returned to you by widget's constructor.</p> <p><strong>Starting from version 1.5.</strong> You can call these methods using chart object returned to you by widget's methods <a href="Widget-Methods#chart-chartindex">chart(index)</a> or <a href="Widget-Methods#chart-activechart">activeChart()</a>.</p> <h2 id="methods"><a href="#methods" aria-hidden="true" class="header-anchor">#</a> Methods</h2> <ul><li><a href="#subscribing-to-chart-events">Subscribing To Chart Events</a> <ul><li><a href="#ondataloaded">onDataLoaded()</a></li> <li><a href="#onsymbolchanged">onSymbolChanged()</a></li> <li><a href="#onintervalchanged">onIntervalChanged()</a></li> <li><a href="#datareadycallback">dataReady(callback)</a></li> <li><a href="#crosshairmovedcallback">crossHairMoved(callback)</a></li> <li><a href="#onvisiblerangechanged">onVisibleRangeChanged()</a></li></ul></li> <li><a href="#chart-actions">Chart Actions</a> <ul><li><a href="#setvisiblerangerange-callback">setVisibleRange(range, callback)</a></li> <li><a href="#setsymbolsymbol-callback">setSymbol(symbol, callback)</a></li> <li><a href="#setresolutionresolution-callback">setResolution(resolution, callback)</a></li> <li><a href="#resetdata">resetData()</a></li> <li><a href="#executeactionbyidactionid">executeActionById(action)</a></li> <li><a href="#getcheckableactionstateactionid">getCheckableActionState(action)</a></li> <li><a href="#refreshmarks">refreshMarks()</a></li> <li><a href="#clearmarks">clearMarks()</a></li> <li><a href="#setcharttypetype">setChartType(type)</a></li> <li><a href="#settimezonetimezone">setTimezone(timezone)</a></li></ul></li> <li><a href="#studies-and-shapes">Studies And Shapes</a> <ul><li><a href="#getallshapes">getAllShapes()</a></li> <li><a href="#getallstudies">getAllStudies()</a></li> <li><a href="#setentityvisibilityid-isvisible">setEntityVisibility(id, isVisible)</a> [obsolete]</li> <li><a href="#createstudyname-forceoverlay-lock-inputs-callback-overrides-options">createStudy(name, forceOverlay, lock, inputs, callback, overrides, options)</a></li> <li><a href="#getstudybyidentityid">getStudyById(entityId)</a></li> <li><a href="#createshapepoint-options">createShape(point, options)</a></li> <li><a href="#createmultipointshapepoints-options">createMultipointShape(points, options)</a></li> <li><a href="#getshapebyidentityid">getShapeById(entityId)</a></li> <li><a href="#removeentityentityid">removeEntity(entityId)</a></li> <li><a href="#removeallshapes">removeAllShapes()</a></li> <li><a href="#removeallstudies">removeAllStudies()</a></li> <li><a href="#getpanes">getPanes()</a></li></ul></li> <li><a href="#study-templates">Study Templates</a> <ul><li><a href="#createstudytemplateoptions">createStudyTemplate(options)</a></li> <li><a href="#applystudytemplatetemplate">applyStudyTemplate(template)</a></li></ul></li> <li><a href="#trading-primitives">Trading Primitives</a> <ul><li><a href="#createorderlineoptions">createOrderLine()</a></li> <li><a href="#createpositionlineoptions">createPositionLine()</a></li> <li><a href="#createexecutionshapeoptions">createExecutionShape()</a></li></ul></li> <li><a href="#getters">Getters</a> <ul><li><a href="#symbol">symbol()</a></li> <li><a href="#symbolExt">symbolExt()</a></li> <li><a href="#resolution">resolution()</a></li> <li><a href="#getvisiblerange">getVisibleRange()</a></li> <li><a href="#getvisiblepricerange">getVisiblePriceRange()</a></li> <li><a href="#priceformatter">priceFormatter()</a></li> <li><a href="#charttype">chartType()</a></li></ul></li> <li><a href="#other">Other</a> <ul><li><a href="#exportdataoptions">exportData(options)</a></li></ul></li></ul> <h2 id="subscribing-to-chart-events"><a href="#subscribing-to-chart-events" aria-hidden="true" class="header-anchor">#</a> Subscribing To Chart Events</h2> <h3 id="ondataloaded"><a href="#ondataloaded" aria-hidden="true" class="header-anchor">#</a> onDataLoaded()</h3> <p>You can subscribe using <a href="Subscription">Subscription</a> object returned by this function to be notified when new history bars are loaded. You can also use the same object to unsubscribe from the event.</p> <h3 id="onsymbolchanged"><a href="#onsymbolchanged" aria-hidden="true" class="header-anchor">#</a> onSymbolChanged()</h3> <p>You can subscribe using <a href="Subscription">Subscription</a> object returned by this function to be notified when the symbol is changed. You can also use the same object to unsubscribe from the event.</p> <h3 id="onintervalchanged"><a href="#onintervalchanged" aria-hidden="true" class="header-anchor">#</a> onIntervalChanged()</h3> <p>You can subscribe using <a href="Subscription">Subscription</a> object returned by this function to be notified when the interval is changed. You can also use the same object to unsubscribe from the event.
When the event is fired it will provide the following arguments:</p> <ol><li><p><code>interval</code>: new interval</p></li> <li><p><code>timeframeParameters</code>: object with the only field <code>timeframe</code>.</p> <p>It contains a timeframe if the interval is changed when the user clicks on the timeframe panel.</p> <p>Otherwise <code>timeframe</code> is <code>undefined</code> and you can change it to display a certain range of bars. Valid timeframe is a number with letter <code>D</code> for days and <code>M</code> for months.</p></li></ol> <p>Example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onIntervalChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>interval<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>timeframe <span class="token operator">=</span> <span class="token string">&quot;12M&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="dataready-callback"><a href="#dataready-callback" aria-hidden="true" class="header-anchor">#</a> dataReady(callback)</h3> <ol><li><code>callback</code>: function(interval)</li></ol> <p>The Charting Library will immediately call the callback function if bars are already loaded or when the bars are received.
The function returns <code>true</code> if bars are already loaded and <code>false</code> otherwise.</p> <h3 id="crosshairmoved-callback"><a href="#crosshairmoved-callback" aria-hidden="true" class="header-anchor">#</a> crossHairMoved(callback)</h3> <p><em>Since version 1.5.</em></p> <ol><li><code>callback</code>: function({time, price})</li></ol> <p>The Charting Library will call the callback function every time the crosshair position is changed.</p> <h3 id="onvisiblerangechanged"><a href="#onvisiblerangechanged" aria-hidden="true" class="header-anchor">#</a> onVisibleRangeChanged()</h3> <p><em>Since version 1.13.</em></p> <p>You can subscribe using <a href="Subscription">Subscription</a> object returned by this function to be notified when visible time range is changed. You can also use the same object to unsubscribe from the event.</p> <h2 id="chart-actions"><a href="#chart-actions" aria-hidden="true" class="header-anchor">#</a> Chart Actions</h2> <h3 id="setvisiblerange-range-callback"><a href="#setvisiblerange-range-callback" aria-hidden="true" class="header-anchor">#</a> setVisibleRange(range, callback)</h3> <ol><li><code>range</code>: object, <code>{from to}</code> <ul><li><code>from</code>, <code>to</code>: unix timestamps, UTC</li></ul></li> <li><code>callback</code>: <code>function()</code>. The Library will call it after it's done with the viewport setup.</li></ol> <p>Forces the chart to adjust its parameters (scroll, scale) to make the selected time period fit the widget.
Neither <code>from</code>, nor <code>to</code> can be set to a future date. This method was introduced in version <code>1.2</code>.</p> <h3 id="setsymbol-symbol-callback"><a href="#setsymbol-symbol-callback" aria-hidden="true" class="header-anchor">#</a> setSymbol(symbol, callback)</h3> <ol><li><code>symbol</code>: string</li> <li><code>callback</code>: function()</li></ol> <p>Makes the chart change its symbol. Callback function is called once the data for the new symbol is loaded.</p> <h3 id="setresolution-resolution-callback"><a href="#setresolution-resolution-callback" aria-hidden="true" class="header-anchor">#</a> setResolution(resolution, callback)</h3> <ol><li><code>resolution</code>: string. Format is described in another <a href="Resolution">article</a>.</li> <li><code>callback</code>: function()</li></ol> <p>Makes the chart change its resolution. Callback function is called once new data is loaded.</p> <h3 id="resetdata"><a href="#resetdata" aria-hidden="true" class="header-anchor">#</a> resetData()</h3> <p>Makes the chart re-request data from the data feed. The function is often called when chart's data has changed.</p> <p>Before calling this function you should call <a href="JS-Api#subscribebarssymbolinfo-resolution-onrealtimecallback-subscriberuid-onresetcacheneededcallback">onResetCacheNeededCallback</a>.</p> <h3 id="executeactionbyid-actionid"><a href="#executeactionbyid-actionid" aria-hidden="true" class="header-anchor">#</a> executeActionById(actionId)</h3> <p><em>Starting from version 1.3.</em></p> <ol><li><code>actionId</code>: string</li></ol> <p>Executes an action according to its id.</p> <p><strong>Shows a dialog:</strong></p> <ul><li><code>chartProperties</code></li> <li><code>compareOrAdd</code></li> <li><code>scalesProperties</code></li> <li><code>tmzProperties</code></li> <li><code>paneObjectTree</code></li> <li><code>insertIndicator</code></li> <li><code>symbolSearch</code></li> <li><code>changeInterval</code></li></ul> <p><strong>Other actions:</strong></p> <ul><li><code>timeScaleReset</code></li> <li><code>chartReset</code></li> <li><code>seriesHide</code></li> <li><code>studyHide</code></li> <li><code>lineToggleLock</code></li> <li><code>lineHide</code></li> <li><code>showLeftAxis</code></li> <li><code>showRightAxis</code></li> <li><code>scaleSeriesOnly</code></li> <li><code>drawingToolbarAction</code></li> <li><code>magnetAction</code></li> <li><code>stayInDrawingModeAction</code></li> <li><code>hideAllMarks</code></li> <li><code>showCountdown</code></li> <li><code>showSeriesLastValue</code></li> <li><code>showSymbolLabelsAction</code></li> <li><code>showStudyLastValue</code></li> <li><code>showStudyPlotNamesAction</code></li> <li><code>undo</code></li> <li><code>redo</code></li> <li><code>paneRemoveAllStudiesDrawingTools</code></li></ul> <p>Examples:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// &lt; ... &gt;</span>
widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeActionById</span><span class="token punctuation">(</span><span class="token string">&quot;undo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &lt; ... &gt;</span>
widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeActionById</span><span class="token punctuation">(</span><span class="token string">&quot;drawingToolbarAction&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hides or shows the drawing toolbar</span>
<span class="token comment">// &lt; ... &gt;</span>
</code></pre></div><h3 id="getcheckableactionstate-actionid"><a href="#getcheckableactionstate-actionid" aria-hidden="true" class="header-anchor">#</a> getCheckableActionState(actionId)</h3> <p><em>Starting from version 1.7.</em></p> <ol><li><code>actionId</code>: string</li></ol> <p>Get a checkable action state (e.g. <code>stayInDrawingModeAction</code>, <code>magnetAction</code>) according to its ID (see the IDs of actions above)</p> <h3 id="refreshmarks"><a href="#refreshmarks" aria-hidden="true" class="header-anchor">#</a> refreshMarks()</h3> <p>When you call this method the Library requests visible marks once again.</p> <h3 id="clearmarks"><a href="#clearmarks" aria-hidden="true" class="header-anchor">#</a> clearMarks()</h3> <p>When you call this method the Library removes all visible marks.</p> <h3 id="setcharttype-type"><a href="#setcharttype-type" aria-hidden="true" class="header-anchor">#</a> setChartType(type)</h3> <ol><li><code>type</code>: number</li></ol> <p>Sets the main series style.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">STYLE_BARS</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_CANDLES</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_LINE</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_AREA</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_HEIKEN_ASHI</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_HOLLOW_CANDLES</span> <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_BASELINE</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token constant">STYLE_RENKO</span><span class="token operator">*</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_KAGI</span><span class="token operator">*</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_PNF</span><span class="token operator">*</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token constant">STYLE_PB</span><span class="token operator">*</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
</code></pre></div><p>*- 💹 available in Trading Terminal</p> <h3 id="closepopupsanddialogs"><a href="#closepopupsanddialogs" aria-hidden="true" class="header-anchor">#</a> closePopupsAndDialogs()</h3> <p>When you call this method a context menu or a dialog closes (if applicable).</p> <h3 id="settimezone-timezone"><a href="#settimezone-timezone" aria-hidden="true" class="header-anchor">#</a> setTimezone(timezone)</h3> <ol><li><code>timezone</code>: string</li></ol> <p>See <a href="Widget-Constructor#timezone">timezone</a> for more information.</p> <p>Example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>widget<span class="token punctuation">.</span><span class="token function">activeChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setTimezone</span><span class="token punctuation">(</span><span class="token string">'Asia/Singapore'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Makes the chart change its timezone.</p> <h2 id="studies-and-shapes"><a href="#studies-and-shapes" aria-hidden="true" class="header-anchor">#</a> Studies And Shapes</h2> <h3 id="getallshapes"><a href="#getallshapes" aria-hidden="true" class="header-anchor">#</a> getAllShapes()</h3> <p>Returns an array of all created shape objects. Each object has the following fields:</p> <ul><li><code>id</code>: id of a shape</li> <li><code>name</code>: name of a shape</li></ul> <h3 id="getallstudies"><a href="#getallstudies" aria-hidden="true" class="header-anchor">#</a> getAllStudies()</h3> <p>Returns an array of all created shape objects. Each object has the following fields:</p> <ul><li><code>id</code>: id of a study</li> <li><code>name</code>: name of a study</li></ul> <h3 id="setentityvisibility-id-isvisible"><a href="#setentityvisibility-id-isvisible" aria-hidden="true" class="header-anchor">#</a> setEntityVisibility(id, isVisible)</h3> <p>Sets visibility of an entity with a passed ID.</p> <p><strong>Deprecated</strong>: Use a shape/study API instead (<code>getShapeById</code>/<code>getStudyById</code>). This is going to be removed in future releases.</p> <h3 id="createstudy-name-forceoverlay-lock-inputs-callback-overrides-options"><a href="#createstudy-name-forceoverlay-lock-inputs-callback-overrides-options" aria-hidden="true" class="header-anchor">#</a> createStudy(name, forceOverlay, lock, inputs, callback, overrides, options)</h3> <ol><li><code>name</code>: string, name of an indicator as shown in the <code>Indicators</code> widget</li> <li><code>forceOverlay</code>: forces the Charting Library to place the created study on the main pane</li> <li><code>lock</code>: boolean, shows whether a user will be able to remove/change/hide the study or not</li> <li><code>inputs</code>: (starting from version <code>1.2</code>) an array of study inputs. This array is expected to contain input values in the same order as in the study properties dialog.</li> <li><code>callback</code>: function(<code>entityId</code>)</li> <li><code>overrides</code>: (starting from version <code>1.2</code>) an object <a href="Studies-Overrides">containing properties</a> you'd like to set for your new study. Note that you should not specify the study name. Start a property path with a plot name.</li> <li><code>options</code>: object with the the following keys:
<ul><li><code>checkLimit</code> - if it is <code>true</code> then the study limit dialog will be shown if the limit is exceeded.</li> <li><code>priceScale</code> - preferred price scale for the study. Possible values are:
<ul><li><code>left</code> - attach the study to the left price scale</li> <li><code>right</code> - attach the study to the right price scale</li> <li><code>no-scale</code> - do not attach the study to any price scale. The study will be added in 'No Scale' mode</li> <li><code>as-series</code> - attach the study to the price scale where the main series is attached (it is only applicable the study is added to the pane with the main series)</li></ul></li></ul></li></ol> <p><strong>Starting from v 1.12 the function returns the result immediately. Callback is kept to maintain compatibility.</strong></p> <p>Creates a study on the main symbol. Here are the examples:</p> <ul><li><code>createStudy('MACD', false, false, [14, 30, &quot;close&quot;, 9])</code></li> <li><code>createStudy('Moving Average Exponential', false, false, [26])</code></li> <li><code>createStudy('Stochastic', false, false, [26], null, {&quot;%d.color&quot; : &quot;#FF0000&quot;})</code></li> <li><code>chart.createStudy('Moving Average', false, false, [26], null, {'Plot.linewidth': 10})</code></li></ul> <p><strong>Remark</strong>: The <code>Compare</code> study has 2 inputs: <code>[dataSource, symbol]</code>. Supported <code>dataSource</code> values are: <code>[&quot;close&quot;, &quot;high&quot;, &quot;low&quot;, &quot;open&quot;]</code>.</p> <p><strong>Remark 2</strong>: You use <code>Overlay</code> study when you choose to <code>Add</code> series on the chart. This study has a single input -- <code>symbol</code>. Here is an example of adding a symbol:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createStudy</span><span class="token punctuation">(</span><span class="token string">'Overlay'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Remark 3</strong>: You also use the <code>Compare</code> study when you choose to compare different financial instruments. This study has two inputs -- <code>source</code> and <code>symbol</code>. Here is an example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createStudy</span><span class="token punctuation">(</span><span class="token string">'Compare'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token string">'AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getstudybyid-entityid"><a href="#getstudybyid-entityid" aria-hidden="true" class="header-anchor">#</a> getStudyById(entityId)</h3> <ol><li><code>entityId</code>: object. Value that is returned when a study is created via API.</li></ol> <p>Returns an instance of the <a href="Study-Api">StudyApi</a> that allows you to interact with the study.</p> <h3 id="createshape-point-options"><a href="#createshape-point-options" aria-hidden="true" class="header-anchor">#</a> createShape(point, options)</h3> <ol><li><code>point</code>: object <code>{time, [price], [channel]}</code> <ul><li><code>time</code>: unix time. It's the only mandatory key in this function argument.</li> <li><code>price</code>: If you specify <code>price</code>, then the shape will be placed at the same price level.
If not, then the shape will be placed close to the bar according the <code>channel</code> value.</li> <li><code>channel</code>: If the price is not set then <code>channel</code> value defines where the shape is placed relative to the bar. Possible values are <code>open</code>, <code>high</code>, <code>low</code>, <code>close</code>.
If no channel is specified then 'open' is a default value.</li></ul></li> <li><code>options</code>: object <code>{shape, [text], [lock], [overrides]}</code> <ul><li><code>shape</code> could be one of the following: <code>arrow_up</code>, <code>arrow_down</code>, <code>flag</code>, <code>vertical_line</code>, <code>horizontal_line</code>.
<code>flag</code> is the default value.</li> <li><code>text</code> is an optional argument. It's the text that will be included in the shape if it's supported.</li> <li><code>lock</code> shows whether a user will be able to remove/change/hide the shape or not.</li> <li><code>disableSelection</code> prevents selecting of the shape</li> <li><code>disableSave</code> prevents saving the shape on the chart</li> <li><code>disableUndo</code> prevents adding of the action to the undo stack</li> <li><code>overrides</code> is an object containing properties you'd like to set for your new shape.</li> <li><code>zOrder</code> can have the following values <code>top</code>, <code>bottom</code>.
<code>top</code> places the line tool on top of all other chart objects while <code>bottom</code> places the line tool behind all other chart objects.
If not specified the line tool is placed on top of all existing chart objects.</li> <li><code>showInObjectsTree</code>: Displays the shape in the Objects Tree dialog. The default value is <code>true</code>.</li></ul></li></ol> <p>The function returns <code>entityId</code> - unique ID of the shape if the creation was successful and <code>null</code> if it wasn't.</p> <p>This call creates a shape at a specific point on the chart provided that it's within the main series area.</p> <h3 id="createmultipointshape-points-options"><a href="#createmultipointshape-points-options" aria-hidden="true" class="header-anchor">#</a> createMultipointShape(points, options)</h3> <ol><li><code>points</code>: is an array of object with the following keys <code>[{time, [price], [channel]},...]</code> <ul><li><code>time</code>: unix time. It's the only mandatory key in this function argument.</li> <li><code>price</code>: If you specify <code>price</code>, then the shape will be placed at the same price level.
If not, then the shape will be placed close to the bar according the <code>channel</code> value.</li> <li><code>channel</code>: If the price is not set then <code>channel</code> value defines where the shape is placed relative to the bar. Possible values are <code>open</code>, <code>high</code>, <code>low</code>, <code>close</code>.
If no channel is specified, 'open' is a default value.</li></ul></li> <li><code>options</code>: object <code>{shape, [text], [lock], [overrides]}</code> <ul><li><code>shape</code> may be one of the <a href="Shapes-and-Overrides">identifiers</a></li> <li><code>text</code> is an optional argument. It's the text that will be included in the shape if it's supported.</li> <li><code>lock</code> shows whether a user will be able to remove/change/hide the shape or not.</li> <li><code>disableSelection</code> prevents selecting of the shape</li> <li><code>disableSave</code> prevents saving the shape on the chart</li> <li><code>disableUndo</code> prevents adding of the action to the undo stack</li> <li><code>overrides</code> is an object containing properties you'd like to set for your new shape.</li> <li><code>zOrder</code> can have the following values <code>top</code>, <code>bottom</code>.
<code>top</code> places the line tool on top of all other chart objects while <code>bottom</code> places the line tool behind all other chart objects.
If not specified the line tool is placed on top of all existing chart objects.</li> <li><code>showInObjectsTree</code>: Displays the shape in the Objects Tree dialog. The default value is <code>true</code>.</li></ul></li></ol> <p>The function returns <code>entityId</code> - unique ID of the shape if the creation was successful and <code>null</code> if it wasn't.</p> <p>Check out <a href="Shapes-and-Overrides">Shapes and Overrides</a> for more information.</p> <p>This call creates a shape at a specific point on the chart provided that it's within the main series area.</p> <h3 id="getshapebyid-entityid"><a href="#getshapebyid-entityid" aria-hidden="true" class="header-anchor">#</a> getShapeById(entityId)</h3> <ol><li><code>entityId</code>: object. The value that is returned when a shape is created via API</li></ol> <p>Returns an instance of the <a href="Shape-Api">ShapeApi</a> that allows you to interact with the shape.</p> <h3 id="removeentity-entityid"><a href="#removeentity-entityid" aria-hidden="true" class="header-anchor">#</a> removeEntity(entityId)</h3> <ol><li><code>entityId</code>: object. It's the value that was returned when the entity (shape or study) was created.</li></ol> <p>Removes the specified entity.</p> <h3 id="removeallshapes"><a href="#removeallshapes" aria-hidden="true" class="header-anchor">#</a> removeAllShapes()</h3> <p>Removes all the shapes from the chart.</p> <h3 id="removeallstudies"><a href="#removeallstudies" aria-hidden="true" class="header-anchor">#</a> removeAllStudies()</h3> <p>Removed all the studies from the chart.</p> <h3 id="getpanes"><a href="#getpanes" aria-hidden="true" class="header-anchor">#</a> getPanes()</h3> <p>Returns an array of instances of the <a href="Pane-Api">PaneApi</a> that allows you to interact with the panes.</p> <h2 id="study-templates"><a href="#study-templates" aria-hidden="true" class="header-anchor">#</a> Study Templates</h2> <h3 id="createstudytemplate-options"><a href="#createstudytemplate-options" aria-hidden="true" class="header-anchor">#</a> createStudyTemplate(options)</h3> <ol><li><code>options</code>: object <code>{saveInterval}</code> <ul><li><code>saveInterval</code>: boolean</li></ul></li></ol> <p>Saves the study template to JS object. Charting Library will call your callback function and pass the state object as an argument.</p> <p>This call is a part of low-level <a href="Saving-and-Loading-Charts">save/load API</a>.</p> <h3 id="applystudytemplate-template"><a href="#applystudytemplate-template" aria-hidden="true" class="header-anchor">#</a> applyStudyTemplate(template)</h3> <ol><li><code>template</code>: object</li></ol> <p>Loads the study template from the <code>template</code> object.</p> <p>This call is a part of low-level <a href="Saving-and-Loading-Charts">save/load API</a>.</p> <h2 id="trading-primitives"><a href="#trading-primitives" aria-hidden="true" class="header-anchor">#</a> Trading Primitives</h2> <h3 id="createorderline-options"><a href="#createorderline-options" aria-hidden="true" class="header-anchor">#</a> createOrderLine(options)</h3> <ol><li><code>options</code> is an object with one possible key - <code>disableUndo</code> which can be <code>true</code> or <code>false</code>.
For compatibility reasons the default value is set to <code>false</code>.</li></ol> <p>Creates a new trading order on the chart and returns an API-object that you can use to adjust its properties and behavior.</p> <p>It is strongly recommended to read <a href="Trading-Primitives">this article</a> before using this call.</p> <p>API object methods:</p> <ul><li><code>remove()</code>: Removes the position from the chart. You can’t this API-object after the call.</li> <li><code>onModify(callback)</code> / <code>onModify(data, callback)</code></li> <li><code>onMove(callback)</code> / <code>onMove(data, callback)</code></li></ul> <p>API object has a set of properties listed below. Each property should be used through respective accessors.
For example, if you wish to work with the <code>Extend Left</code> property, then use <code>getExtendLeft()</code> of <code>setExtendLeft()</code> methods.</p> <p><strong>General properties</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Supported Values</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Price</td> <td>Double</td> <td>Double</td> <td>0.0</td></tr> <tr><td>Text</td> <td>String</td> <td>String</td> <td>&quot;&quot;</td></tr> <tr><td>Tooltip</td> <td>String</td> <td>String</td> <td>&quot;&quot;</td></tr> <tr><td>Quantity</td> <td>String</td> <td>String</td> <td>&quot;&quot;</td></tr> <tr><td>Editable</td> <td>Boolean</td> <td>Boolean</td> <td>true</td></tr></tbody></table> <p><strong>Horizontal line properties</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Supported Values</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Extend Left</td> <td>Boolean</td> <td>&quot;inherit&quot; or Boolean</td> <td>True</td></tr> <tr><td>Line Length</td> <td>Integer</td> <td>&quot;inherit&quot; or 0 .. 100</td> <td>0</td></tr> <tr><td>Line Style</td> <td>Integer</td> <td>&quot;inherit&quot; or 0 .. 2</td> <td>2</td></tr> <tr><td>Line Width</td> <td>Integer</td> <td>&quot;inherit&quot; or 1 .. 4</td> <td>1</td></tr></tbody></table> <p><strong>Fonts</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Body Font</td> <td>String</td> <td>&quot;bold 7pt Verdana&quot;</td></tr> <tr><td>Quantity Font</td> <td>String</td> <td>&quot;bold 7pt Verdana&quot;</td></tr></tbody></table> <p><strong>Colors</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Line Color</td> <td>String</td> <td>&quot;rgb(255, 0, 0)&quot;</td></tr> <tr><td>Body Border Color</td> <td>String</td> <td>&quot;rgb(255, 0, 0)&quot;</td></tr> <tr><td>Body Background Color</td> <td>String</td> <td>&quot;rgba(255, 255, 255, 0.75)&quot;</td></tr> <tr><td>Body Text Color</td> <td>String</td> <td>&quot;rgb(255, 0, 0)&quot;</td></tr> <tr><td>Quantity Border Color</td> <td>String</td> <td>&quot;rgb(255, 0, 0)&quot;</td></tr> <tr><td>Quantity Background Color</td> <td>String</td> <td>&quot;rgba(255, 0, 0, 0.75)&quot;</td></tr> <tr><td>Quantity Text Color</td> <td>String</td> <td>&quot;rgb(255, 255, 255)&quot;</td></tr> <tr><td>Cancel Button Border Color</td> <td>String</td> <td>&quot;rgb(255, 0, 0)&quot;</td></tr> <tr><td>Cancel Button Background Color</td> <td>String</td> <td>&quot;rgba(255, 255, 255, 0.75)&quot;</td></tr> <tr><td>Cancel Button Icon Color</td> <td>String</td> <td>&quot;rgb(255, 0, 0)&quot;</td></tr></tbody></table> <p>Example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createOrderLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onMove</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;onMove called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onModify</span><span class="token punctuation">(</span><span class="token string">&quot;onModify called&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onCancel</span><span class="token punctuation">(</span><span class="token string">&quot;onCancel called&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;STOP: 73.5 (5,64%)&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setQuantity</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="createpositionline-options"><a href="#createpositionline-options" aria-hidden="true" class="header-anchor">#</a> createPositionLine(options)</h3> <ol><li><code>options</code> is an object with one possible key - <code>disableUndo</code> which can be <code>true</code> or <code>false</code>.
For compatibility reasons the default value is set to <code>false</code>.</li></ol> <p>Creates a new trading position on the chart and returns an API-object that you can use to adjust its properties and behavior.</p> <p>It is strongly recommended to read <a href="Trading-Primitives">this article</a> before using this call.</p> <p>API object methods:</p> <ul><li><code>remove()</code>: Removes the position from the chart. You can’t use this API-object after the call.</li> <li><code>onClose(callback)</code> / <code>onClose(data, callback)</code></li> <li><code>onModify(callback)</code> / <code>onModify(data, callback)</code></li> <li><code>onReverse(callback)</code> / <code>onReverse(data, callback)</code></li></ul> <p>API object has a set of properties listed below. Each property should be used through respective accessors.
For example, if you wish to work with <code>Extend Left</code> property, use <code>getExtendLeft()</code> of <code>setExtendLeft()</code> methods.</p> <p><strong>General properties</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Supported Values</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Price</td> <td>Double</td> <td>Double</td> <td>0.0</td></tr> <tr><td>Text</td> <td>String</td> <td>String</td> <td>&quot;&quot;</td></tr> <tr><td>Tooltip</td> <td>String</td> <td>String</td> <td>&quot;&quot;</td></tr> <tr><td>Quantity</td> <td>String</td> <td>String</td> <td>&quot;&quot;</td></tr></tbody></table> <p><strong>Horizontal line properties</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Supported Values</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Extend Left</td> <td>Boolean</td> <td>&quot;inherit&quot; or Boolean</td> <td>True</td></tr> <tr><td>Line Length</td> <td>Integer</td> <td>&quot;inherit&quot; or 0 .. 100</td> <td>0</td></tr> <tr><td>Line Style</td> <td>Integer</td> <td>&quot;inherit&quot; or 0 .. 2</td> <td>2</td></tr> <tr><td>Line Width</td> <td>Integer</td> <td>&quot;inherit&quot; or 1 .. 4</td> <td>1</td></tr></tbody></table> <p><strong>Fonts</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Body Font</td> <td>String</td> <td>&quot;bold 7pt Verdana&quot;</td></tr> <tr><td>Quantity Font</td> <td>String</td> <td>&quot;bold 7pt Verdana&quot;</td></tr></tbody></table> <p><strong>Colors</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Line Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Body Border Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Body Background Color</td> <td>String</td> <td>&quot;rgba(255, 255, 255, 0.75)&quot;</td></tr> <tr><td>Body Text Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Quantity Border Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Quantity Background Color</td> <td>String</td> <td>&quot;rgba(0, 113, 224, 0.75)&quot;</td></tr> <tr><td>Quantity Text Color</td> <td>String</td> <td>&quot;rgb(255, 255, 255)&quot;</td></tr> <tr><td>Reverse Button Border Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Reverse Button Background Color</td> <td>String</td> <td>&quot;rgba(255, 255, 255, 0.75)&quot;</td></tr> <tr><td>Reverse Button Icon Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Close Button Border Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr> <tr><td>Close Button Background Color</td> <td>String</td> <td>&quot;rgba(255, 255, 255, 0.75)&quot;</td></tr> <tr><td>Close Button Icon Color</td> <td>String</td> <td>&quot;rgb(0, 113, 224)&quot;</td></tr></tbody></table> <p>Example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createPositionLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onModify</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;onModify called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onReverse</span><span class="token punctuation">(</span><span class="token string">&quot;onReverse called&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span><span class="token string">&quot;onClose called&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;PROFIT: 71.1 (3.31%)&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setQuantity</span><span class="token punctuation">(</span><span class="token string">&quot;8.235&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setExtendLeft</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setLineStyle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setLineLength</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="createexecutionshape-options"><a href="#createexecutionshape-options" aria-hidden="true" class="header-anchor">#</a> createExecutionShape(options)</h3> <ol><li><code>options</code> is an object with one possible key - <code>disableUndo</code> which can be <code>true</code> or <code>false</code>.
For compatibility reasons the default value is set to <code>false</code>.</li></ol> <p>Creates a new trade execution on the chart and returns an API-object that you can use to control the execution properties.</p> <p>It is strongly recommended to read <a href="Trading-Primitives">this article</a> before using this call.</p> <p>API object has a set of properties listed below. Each property should be used through respective accessors.
For example, if you wish to work with <code>Extend Left</code> property, then use <code>getExtendLeft()</code> of <code>setExtendLeft()</code> methods.</p> <p>API object methods:</p> <ul><li><code>remove()</code>: Removes the execution shape from the chart. You can’t use this API-object after the call.</li></ul> <p><strong>General properties</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Supported Values</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Price</td> <td>Double</td> <td>Double</td> <td>0.0</td></tr> <tr><td>Time</td> <td>Integer</td> <td>Unix time</td> <td>0</td></tr> <tr><td>Direction</td> <td>String</td> <td>&quot;buy&quot; or &quot;sell&quot;</td> <td>&quot;buy&quot;</td></tr> <tr><td>Text</td> <td>String</td> <td>String</td> <td>&quot;execution&quot;</td></tr> <tr><td>Tooltip</td> <td>String</td> <td>String</td> <td></td></tr> <tr><td>Arrow Height</td> <td>Integer</td> <td>Integer</td> <td>8</td></tr> <tr><td>Arrow Spacing</td> <td>Integer</td> <td>Integer</td> <td>1</td></tr></tbody></table> <p><strong>Fonts</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Font</td> <td>String</td> <td>&quot;8pt Verdana&quot;</td></tr></tbody></table> <p><strong>Colors</strong>:</p> <table><thead><tr><th>Property</th> <th>Type</th> <th>Default Value</th></tr></thead> <tbody><tr><td>Text Color</td> <td>String</td> <td>&quot;rgb(0, 0, 0)&quot;&quot;</td></tr> <tr><td>Arrow Color</td> <td>String</td> <td>&quot;rgba(0, 0, 255)&quot;</td></tr></tbody></table> <p>Example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>widget<span class="token punctuation">.</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createExecutionShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;@1,320.75 Limit Buy 1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setTooltip</span><span class="token punctuation">(</span><span class="token string">&quot;@1,320.75 Limit Buy 1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span><span class="token string">&quot;rgba(0,255,0,0.5)&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setArrowColor</span><span class="token punctuation">(</span><span class="token string">&quot;#0F0&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setDirection</span><span class="token punctuation">(</span><span class="token string">&quot;buy&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token number">1413559061758</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="getters"><a href="#getters" aria-hidden="true" class="header-anchor">#</a> Getters</h2> <h3 id="symbol"><a href="#symbol" aria-hidden="true" class="header-anchor">#</a> symbol()</h3> <p>Returns the current symbol of the chart.</p> <h3 id="symbolext"><a href="#symbolext" aria-hidden="true" class="header-anchor">#</a> symbolExt()</h3> <p>Returns the current symbol information of the chart. The object has the following fields:</p> <ul><li><code>symbol</code>: is the same as the result of <a href="#symbol">symbol()</a> method</li> <li><code>full_name</code>: the full name of the symbol</li> <li><code>exchange</code>: the exchange of the symbol</li> <li><code>description</code>: the description of the symbol</li> <li><code>type</code>: the type of the symbol</li></ul> <h3 id="resolution"><a href="#resolution" aria-hidden="true" class="header-anchor">#</a> resolution()</h3> <p>Returns the chart's time interval. The format is described in this <a href="Resolution">article</a>.</p> <h3 id="getvisiblerange"><a href="#getvisiblerange" aria-hidden="true" class="header-anchor">#</a> getVisibleRange()</h3> <p>Returns the object <code>{from, to}</code>. <code>from</code> and <code>to</code> are Unix timestamps <strong>in the timezone of the chart</strong>.</p> <h3 id="getvisiblepricerange"><a href="#getvisiblepricerange" aria-hidden="true" class="header-anchor">#</a> getVisiblePriceRange()</h3> <p><em>Starting from V 1.7.</em></p> <p>Returns the object <code>{from, to}</code>. <code>from</code> and <code>to</code> are boundaries of the price scale visible range in main series area.</p> <h3 id="priceformatter"><a href="#priceformatter" aria-hidden="true" class="header-anchor">#</a> priceFormatter()</h3> <p>Returns the object with <code>format</code> function that you can use to format the prices.</p> <h3 id="charttype"><a href="#charttype" aria-hidden="true" class="header-anchor">#</a> chartType()</h3> <p>Returns the main series style type.</p> <h2 id="other"><a href="#other" aria-hidden="true" class="header-anchor">#</a> Other</h2> <h3 id="exportdata-options"><a href="#exportdata-options" aria-hidden="true" class="header-anchor">#</a> exportData(options)</h3> <p><em>Starting from version 1.14.</em></p> <ol><li><code>options</code> (optional) is an object, which can contain the following properties:
<ul><li><code>from</code> (<code>number</code>) - date of the first exporting bar (UNIX timestamp in seconds).
By default the time of the leftmost loaded bar is used.</li> <li><code>to</code> (<code>number</code>) - date of the last exporting bar (UNIX timestamp in seconds).
By default the time of the rightmost (real-time) bar is used.</li> <li><code>includeTime</code> (<code>boolean</code>, default <code>true</code>) - defines whether each item of the exported data should contain time.</li> <li><code>includeSeries</code> (<code>boolean</code>, default <code>true</code>) - defines whether the exported data should contain the main series (open, high, low, close).</li> <li><code>includedStudies</code> - which studies should be included in the exported data
(by default, the value is <code>'all'</code> which means that all studies are included, but if you want to export only some of them then you can assign an array of <a href="#getallstudies">studies' ids</a>).</li></ul></li></ol> <p>Exports data from the chart, returns a Promise object. This method doesn't load data. The result has the following structure:</p> <ul><li><p><code>schema</code> is an array of field descriptors, each descriptor might be one the following types:</p> <ul><li><code>TimeFieldDescriptor</code> - description of the time field. It contains only one field - <code>type</code> with the <code>'time'</code> value.</li> <li><code>SeriesFieldDescriptor</code> - description of a series field. It contains the following fields:
<ul><li><code>type</code> (<code>'value'</code>)</li> <li><code>sourceType</code> (<code>'series'</code>)</li> <li><code>plotTitle</code> (<code>string</code>) - the name of the plot (open, high, low, close).</li></ul></li> <li><code>StudyFieldDescriptor</code> - description of a study field. It contains the following fields:
<ul><li><code>type</code> (<code>'value'</code>)</li> <li><code>sourceType</code> (<code>'study'</code>)</li> <li><code>sourceId</code> (<code>string</code>) - id of the study</li> <li><code>sourceTitle</code> (<code>string</code>) - title of the study</li> <li><code>plotTitle</code> (<code>string</code>) - title of the plot</li></ul></li></ul></li> <li><p><code>data</code> is an array of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array" target="_blank" rel="noopener noreferrer">Float64Array<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>s.
Each <code>Float64Array</code> array has the same length as <code>schema</code> array and represents the associated field's item.</p></li></ul> <p><strong>Examples:</strong></p> <ol><li><code>chart.exportData({ includeTime: false, includeSeries: true, includedStudies: [] })</code> - to export series' data only.</li> <li><code>chart.exportData({ includeTime: true, includeSeries: true, includedStudies: [] })</code> - to export series' data with times.</li> <li><code>chart.exportData({ includeTime: false, includeSeries: false, includedStudies: ['STUDY_ID'] })</code> - to export data for the study with the id <code>STUDY_ID</code>.</li> <li><code>chart.exportData({ includeTime: true, includeSeries: true, includedStudies: 'all' })</code> - to export all available data from the chart.</li> <li><code>chart.exportData({ includeTime: false, includeSeries: true, to: Date.UTC(2018, 0, 1) / 1000 })</code> - to export series' data before <code>2018-01-01</code>.</li> <li><code>chart.exportData({ includeTime: false, includeSeries: true, from: Date.UTC(2018, 0, 1) / 1000 })</code> - to export series' data in the range before <code>2018-01-01</code>.</li> <li><code>chart.exportData({ includeTime: false, includeSeries: true, from: Date.UTC(2018, 0, 1) / 1000, to: Date.UTC(2018, 1, 1) / 1000 })</code> - to export series' data in the range between <code>2018-01-01</code> and <code>2018-02-01</code>.</li></ol> <h2 id="see-also"><a href="#see-also" aria-hidden="true" class="header-anchor">#</a> See Also</h2> <ul><li><a href="Widget-Methods">Widget Methods</a></li> <li><a href="Customization-Overview">Customization Overview</a></li> <li><a href="Widget-Constructor">Widget Constructor</a></li> <li><a href="Saving-and-Loading-Charts">Saving and Loading Charts</a></li> <li><a href="Studies-Overrides">Overriding Studies' Defaults</a></li> <li><a href="Overrides">Overriding Chart's Defaults</a></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-9-6 21:23:09</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/charting_library_wiki/zh/wiki/Widget-Methods.html" class="prev">
          b. Widget Methods
        </a></span> <span class="next"><a href="/charting_library_wiki/zh/wiki/Featuresets.html">
          d. Featuresets
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/charting_library_wiki/assets/js/53.15f51e33.js" defer></script><script src="/charting_library_wiki/assets/js/app.e5b750fa.js" defer></script>
  </body>
</html>
